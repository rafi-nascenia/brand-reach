<%= stylesheet_link_tag  'profile.css', media: 'all' %>

<% title "BrandReach Profile" %>

<div class="brands-profile-page-wrapper">

  <%= form_for @user, :url => {:controller => "profile", :action => "update"}, html: { class: "form-horizontal personal-info-form"} do |f| %>

      <% if @user.image.present? %>
          <%= image_tag(@user.image, :class => 'profile-picture', :alt => "profile-picture") %>
      <% else %>
          <%= image_tag('user2-160x160.jpg', :class => 'profile-picture', :alt => "profile-picture") %>
      <% end %>

      <h4 class="personal-info">PERSONAL INFORMATION</h4>

      <div class="form-group">
        <div class="col-md-6">
          <%= f.label :first_name, "First Name" %>
          <%= f.text_field :first_name %>
        </div>
        <div class="col-md-6">
          <%= f.label :last_name, "Last Name" %>
          <%= f.text_field :last_name %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-md-6">
          <%= f.label :company_name, "Company Name" %>
          <%= f.text_field :company_name %>
        </div>
        <div class="col-md-6">
          <%= f.label :company_email, "Company Email" %>
          <%= f.text_field :company_email %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-md-6">
          <%= f.label :industry %>
          <%= f.text_field :industry %>
        </div>
        <div class="col-md-6">
          <%= f.label :phone %>
          <%= f.text_field :phone %>
        </div>
      </div>

      <div class="form-group">
        <div class="col-md-6">
          <%= f.label :country %>
          <%= f.country_select :country, {priority: %w(US CA IN)}, { :class => 'profile-dropdown-color'}, {} %>
        </div>

        <div class="col-md-6">
          <%= f.label :state %>
          <%= render partial: 'sub_region_select', locals: {parent_region: f.object.country} %>
        </div>
      </div>
      <div class="form-group">
        <div class="col-md-6">
          <div class="row">
            <div class="col-md-12">
              <%= f.label :city %>
              <%= f.text_field :city %>
            </div>
            <div class="col-md-12">
              <%= f.label :zip_code %>
              <%= f.text_field :zip_code %>
            </div>
            <div class="col-md-12">
              <%= f.label :landmark %>
              <%= f.text_field :landmark %>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <%= f.label :street_address, class: 'textarea-label' %>
          <%= f.text_area :street_address, rows: 4, class: 'street-address-textarea', placeholder: "Enter your address here" %>
        </div>
      </div>

      <h4 class="company-info">COMPANY INFORMATION</h4>

      <div class="form-group short-bio-row">
        <div class="col-md-12">
          <%= f.label :short_bio, "Short Bio", class: 'textarea-label' %>
          <%= f.text_area :short_bio, rows: 6, class: 'short_bio' %>
        </div>
      </div>
      <%= f.button  "UPDATE INFORMATION", class: 'btn btn-update' %>
  <% end %>

  <div class="divider-personal-info-password"></div>

  <%= form_for @user, :url => {:controller => "profile", :action => "update_password" }, :method => :put, html: { class: "form-horizontal personal-info-form"} do |f| %>

      <h4 class="account-setup">ACCOUNT SETUP</h4>

      <div class="form-group">
        <div class="col-md-6">
          <%= f.label :current_password, "Old Password" %>
          <%= f.password_field :current_password %>
        </div>
        <div class="col-md-6">
          <label>&nbsp;</label>
        </div>
      </div>

      <div class="form-group">
        <div class="col-md-6">
          <%= f.label :password, "New Password" %>
          <%= f.password_field :password %>
        </div>
        <div class="col-md-6">
          <%= f.label :password_confirmation, "Retype Password" %>
          <%= f.password_field :password_confirmation %>
        </div>
      </div>
      <%= f.button  "UPDATE PASSWORD", class: 'btn btn-update' %>
  <% end %>
</div>

<script>

$(document).ready(function(){
    $('select#user_country').change(function() {

        var country = 'country=' + $('select#user_country :selected').text();
        jQuery.get('/profiles/subregion_options' + country, function(data){
            jQuery("user_state").html( data);
    })
    return false;
    });


});

</script>
